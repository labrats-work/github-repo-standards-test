# Compliance Reports

This directory contains generated compliance reports from automated checks.

## Report Format

Reports are generated in two formats:

### Markdown Reports
- **Filename:** `compliance-report-YYYY-MM-DD.md`
- **Purpose:** Human-readable compliance summary
- **Contains:** Repository scores, tier classifications, and detailed check results

### JSON Reports
- **Filename:** `compliance-report-YYYY-MM-DD.json`
- **Purpose:** Machine-readable data for automation
- **Contains:** Structured data for programmatic analysis and trending

## Report Generation

Reports are automatically generated by the GitHub Actions workflow:
- **Schedule:** Weekly (Mondays at 9 AM UTC)
- **Workflow:** `.github/workflows/compliance-check.yml`
- **Trigger:** Manual workflow dispatch or push to compliance files

## Report Structure

### Markdown Report Contents
```markdown
# Repository Compliance Report
Generated: YYYY-MM-DD HH:MM:SS UTC

## Summary
- Total Repositories: N
- Average Compliance: XX%

## Repository Details
### repository-name
- Score: XX% (Tier)
- Passed: N/M checks
- Failed checks listed with priorities
```

### JSON Report Structure
```json
{
  "generated_at": "YYYY-MM-DDTHH:MM:SSZ",
  "repositories": [
    {
      "repository": "repo-name",
      "path": "/path/to/repo",
      "compliance_score": 85,
      "tier": "ðŸŸ¡ Good",
      "passed": 15,
      "failed": 3,
      "total_score": 68,
      "max_score": 80,
      "checks": [
        {
          "script": "check-name.sh",
          "priority": "HIGH",
          "result": {
            "check_id": "COMP-001",
            "name": "Check Name",
            "status": "pass",
            "message": "Check passed"
          }
        }
      ]
    }
  ]
}
```

## Retention

- **Artifacts:** Retained for 30 days (configurable via `ARTIFACT_RETENTION_DAYS`)
- **Git History:** Reports committed to repository for historical tracking
- **Cleanup:** Old reports can be manually removed or archived as needed

## Usage

### View Latest Report
```bash
# Markdown
cat reports/compliance-report-$(date +%Y-%m-%d).md

# JSON
cat reports/compliance-report-$(date +%Y-%m-%d).json
```

### Parse JSON Reports
```bash
# Get failing repositories
jq '.repositories[] | select(.compliance_score < 75)' reports/compliance-report-*.json

# Get repositories by tier
jq '.repositories[] | select(.tier | contains("Critical"))' reports/compliance-report-*.json

# Count checks by status
jq '[.repositories[].checks[].result.status] | group_by(.) | map({status: .[0], count: length})' reports/compliance-report-*.json
```

## Notes

- Reports are committed automatically by the workflow
- Each run creates a new timestamped report
- Historical reports provide compliance trends over time
- Reports contain data only for repositories where the scanner has access

---

**Generated reports are organization-specific and should not be committed to template repositories.**
